spring:
  application:
    name: dispatch-api

  # 프로필 설정
  profiles:
    active: dev

  # JPA 설정
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true
    properties:
      hibernate:
        format_sql: true
        dialect: org.hibernate.dialect.PostgreSQLDialect

  # 파일 업로드 설정
  servlet:
    multipart:
      max-file-size: 10MB
      max-request-size: 10MB

---
# 개발 환경 (H2 인메모리 - Docker 없이 테스트용)
spring:
  config:
    activate:
      on-profile: dev

  datasource:
    url: jdbc:h2:mem:dispatch;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
    username: sa
    password:
    driver-class-name: org.h2.Driver

  h2:
    console:
      enabled: true
      path: /h2-console

  jpa:
    hibernate:
      ddl-auto: create-drop
    properties:
      hibernate:
        dialect: org.hibernate.dialect.H2Dialect

  data:
    redis:
      host: localhost
      port: 6379

server:
  port: 8082

---
# Docker 환경
spring:
  config:
    activate:
      on-profile: docker

  datasource:
    url: jdbc:postgresql://postgres:5432/dispatch
    username: dispatch
    password: dispatch123
    driver-class-name: org.postgresql.Driver

  jpa:
    hibernate:
      ddl-auto: update
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect

  data:
    redis:
      host: redis
      port: 6379

server:
  port: 8080

---
# 운영 환경
spring:
  config:
    activate:
      on-profile: prod

  datasource:
    url: jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/${DB_NAME:dispatch}
    username: ${DB_USERNAME:dispatch}
    password: ${DB_PASSWORD:dispatch}

  jpa:
    hibernate:
      ddl-auto: validate

  data:
    redis:
      host: ${REDIS_HOST:localhost}
      port: ${REDIS_PORT:6379}

server:
  port: 8080

---
# 공통 설정
jwt:
  secret: ${JWT_SECRET:dispatch-secret-key-for-jwt-token-generation-minimum-256-bits-required}
  expiration: 86400000  # 24시간
  refresh-expiration: 604800000  # 7일

# verify-server 연동
verify:
  api:
    url: ${VERIFY_API_URL:http://localhost:8080}
    key: ${VERIFY_API_KEY:}

# 파일 저장 경로
file:
  upload-dir: ${FILE_UPLOAD_DIR:./uploads}

# Firebase FCM 설정
firebase:
  enabled: ${FIREBASE_ENABLED:true}
  config-path: ${FIREBASE_CONFIG_PATH:firebase-service-account.json}

# Swagger
springdoc:
  api-docs:
    path: /api-docs
  swagger-ui:
    path: /swagger-ui.html
    tags-sorter: alpha
    operations-sorter: alpha
